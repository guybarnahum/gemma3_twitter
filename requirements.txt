# --- Core ABI pins (put first so wheels resolve against them) ---
numpy<2
pyarrow>=14,<17
protobuf<5

# --- Hugging Face stack (compatible set) ---
transformers==4.46.2
huggingface_hub==0.24.6
datasets==2.19.1
accelerate==0.33.0
peft==0.13.0
trl==0.9.6

# --- Tokenization / utils ---
sentencepiece
safetensors>=0.4.3
einops>=0.7.0
tqdm>=4.66.0

# --- Optional 4-bit (Linux/NVIDIA only) ---
bitsandbytes==0.43.1 ; platform_system != "Darwin" and platform_machine == "x86_64"
